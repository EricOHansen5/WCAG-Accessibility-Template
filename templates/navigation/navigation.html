<!-- mega-menu.component.html -->
<nav aria-label="Main navigation">
    <button class="menu-trigger" aria-haspopup="true" [attr.aria-expanded]="isMenuOpen ? 'true' : 'false'"
        (click)="toggleMenu()" (keydown.enter)="toggleMenu()" (keydown.escape)="closeMenu()" #trigger>
        Menu
        <mat-icon aria-hidden="true">{{ isMenuOpen ? 'arrow_drop_up' : 'arrow_drop_down' }}</mat-icon>
    </button>

    <div class="mega-menu" [class.open]="isMenuOpen" role="menu" aria-orientation="vertical"
        (keydown.arrowUp)="onArrowUp($event)" (keydown.arrowDown)="onArrowDown($event)" (keydown.escape)="closeMenu()"
        *ngIf="isMenuOpen" #menuPanel>
        <div class="menu-section" *ngFor="let section of menuSections">
            <h3 class="section-heading">{{ section.title }}</h3>
            <ul role="none">
                <li *ngFor="let item of section.items" role="menuitem" tabindex="-1" (click)="navigateTo(item.link)"
                    (keydown.enter)="navigateTo(item.link)">
                    <a [routerLink]="item.link" class="menu-item" routerLinkActive="active">
                        <mat-icon aria-hidden="true">{{ item.icon }}</mat-icon>
                        <span class="item-text">{{ item.text }}</span>
                        <span class="sr-only">, {{ section.title }} section</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>